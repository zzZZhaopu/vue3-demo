<template>
  <div class="markdown-compare-container">
    <h1>Markdown æ¸²æŸ“æ–¹æ¡ˆå¯¹æ¯”</h1>
    
    <!-- è¾“å…¥åŒºåŸŸ -->
    <div class="input-section">
      <h2>æµ‹è¯•å†…å®¹</h2>
      <el-input
        v-model="markdownContent"
        type="textarea"
        :rows="10"
        placeholder="è¾“å…¥ Markdown å†…å®¹è¿›è¡Œæµ‹è¯•..."
      />
      <div class="preset-buttons">
        <el-button @click="loadPreset1">åŠ è½½ç¤ºä¾‹ 1ï¼ˆåŸºç¡€è¯­æ³•ï¼‰</el-button>
        <el-button @click="loadPreset2">åŠ è½½ç¤ºä¾‹ 2ï¼ˆä»£ç å—ï¼‰</el-button>
        <el-button @click="loadPreset3">åŠ è½½ç¤ºä¾‹ 3ï¼ˆç»¼åˆæµ‹è¯•ï¼‰</el-button>
      </div>
    </div>
    
    <!-- å¯¹æ¯”å±•ç¤ºåŒºåŸŸ -->
    <div class="compare-section">
      <!-- æ–¹æ¡ˆä¸‰ -->
      <div class="renderer-card">
        <div class="card-header">
          <h3>æ–¹æ¡ˆä¸‰ï¼šmarked + highlight.js</h3>
          <el-tag type="success">æ‰‹åŠ¨é›†æˆ</el-tag>
        </div>
        <div class="card-desc">
          <p>âœ… æœ€æµè¡Œçš„ç»„åˆ</p>
          <p>âœ… çµæ´»æ€§é«˜</p>
          <p>âš ï¸ éœ€è¦æ‰‹åŠ¨é…ç½®</p>
        </div>
        <div class="card-body">
          <MarkdownRenderer3 :content="markdownContent" />
        </div>
      </div>
      
      <!-- æ–¹æ¡ˆå›› -->
      <div class="renderer-card">
        <div class="card-header">
          <h3>æ–¹æ¡ˆå››ï¼švue3-markdown-it</h3>
          <el-tag type="primary">å¼€ç®±å³ç”¨</el-tag>
        </div>
        <div class="card-desc">
          <p>âœ… Vue 3 ä¸“ç”¨ç»„ä»¶</p>
          <p>âœ… é…ç½®ç®€å•</p>
          <p>âœ… å“åº”å¼æ›´æ–°</p>
        </div>
        <div class="card-body">
          <MarkdownRenderer4 :content="markdownContent" />
        </div>
      </div>
      
      <!-- æ–¹æ¡ˆäº” -->
      <div class="renderer-card">
        <div class="card-header">
          <h3>æ–¹æ¡ˆäº”ï¼šmarked + DOMPurify + highlight.js</h3>
          <el-tag type="danger">æœ€å®‰å…¨</el-tag>
        </div>
        <div class="card-desc">
          <p>âœ… XSS é˜²æŠ¤æœ€å¼º</p>
          <p>âœ… é€‚åˆ AI å¯¹è¯</p>
          <p>âœ… ä»£ç å¤åˆ¶åŠŸèƒ½</p>
        </div>
        <div class="card-body">
          <MarkdownRenderer5 :content="markdownContent" />
        </div>
      </div>
    </div>
  </div>
</template>

<script lang="ts" setup>
import { ref } from 'vue';
import MarkdownRenderer3 from '@/components/MarkdownRenderer3.vue';
import MarkdownRenderer4 from '@/components/MarkdownRenderer4.vue';
import MarkdownRenderer5 from '@/components/MarkdownRenderer5.vue';

// Markdown å†…å®¹
const markdownContent = ref(`# æ¬¢è¿ä½¿ç”¨ Markdown æ¸²æŸ“å™¨

è¿™æ˜¯ä¸€ä¸ª **Markdown æ¸²æŸ“å™¨**å¯¹æ¯”é¡µé¢ã€‚

## åŠŸèƒ½ç‰¹æ€§

- æ”¯æŒæ ‡é¢˜
- æ”¯æŒ**ç²—ä½“**å’Œ*æ–œä½“*
- æ”¯æŒåˆ—è¡¨
- æ”¯æŒä»£ç é«˜äº®

\`\`\`javascript
function hello() {
  console.log('Hello, Markdown!');
}
\`\`\`

> è¿™æ˜¯ä¸€ä¸ªå¼•ç”¨å—
`);

// é¢„è®¾ç¤ºä¾‹ 1ï¼šåŸºç¡€è¯­æ³•
const loadPreset1 = () => {
  markdownContent.value = `# Markdown åŸºç¡€è¯­æ³•æµ‹è¯•

## æ–‡æœ¬æ ¼å¼

è¿™æ˜¯**ç²—ä½“æ–‡æœ¬**ï¼Œè¿™æ˜¯*æ–œä½“æ–‡æœ¬*ï¼Œè¿™æ˜¯~~åˆ é™¤çº¿~~ã€‚

## åˆ—è¡¨

### æ— åºåˆ—è¡¨
- é¡¹ç›® 1
- é¡¹ç›® 2
  - å­é¡¹ç›® 2.1
  - å­é¡¹ç›® 2.2
- é¡¹ç›® 3

### æœ‰åºåˆ—è¡¨
1. ç¬¬ä¸€æ­¥
2. ç¬¬äºŒæ­¥
3. ç¬¬ä¸‰æ­¥

## é“¾æ¥å’Œå›¾ç‰‡

[è®¿é—® GitHub](https://github.com)

## å¼•ç”¨

> è¿™æ˜¯ä¸€æ®µå¼•ç”¨æ–‡æœ¬ã€‚
> å¯ä»¥æœ‰å¤šè¡Œã€‚

## åˆ†å‰²çº¿

---

è¿™æ˜¯åˆ†å‰²çº¿åçš„å†…å®¹ã€‚
`;
};

// é¢„è®¾ç¤ºä¾‹ 2ï¼šä»£ç å—
const loadPreset2 = () => {
  markdownContent.value = `# ä»£ç é«˜äº®æµ‹è¯•

## JavaScript ä»£ç 

\`\`\`javascript
// è¿™æ˜¯ä¸€æ®µ JavaScript ä»£ç 
function fibonacci(n) {
  if (n <= 1) return n;
  return fibonacci(n - 1) + fibonacci(n - 2);
}

console.log(fibonacci(10)); // è¾“å‡º: 55
\`\`\`

## Python ä»£ç 

\`\`\`python
# è¿™æ˜¯ä¸€æ®µ Python ä»£ç 
def quick_sort(arr):
    if len(arr) <= 1:
        return arr
    pivot = arr[len(arr) // 2]
    left = [x for x in arr if x < pivot]
    middle = [x for x in arr if x == pivot]
    right = [x for x in arr if x > pivot]
    return quick_sort(left) + middle + quick_sort(right)

print(quick_sort([3, 6, 8, 10, 1, 2, 1]))
\`\`\`

## è¡Œå†…ä»£ç 

è¿™æ˜¯ä¸€æ®µåŒ…å« \`const name = 'Vue 3'\` çš„è¡Œå†…ä»£ç ã€‚
`;
};

// é¢„è®¾ç¤ºä¾‹ 3ï¼šç»¼åˆæµ‹è¯•
const loadPreset3 = () => {
  markdownContent.value = `# ğŸ‰ Markdown ç»¼åˆåŠŸèƒ½æµ‹è¯•

## ğŸ“ è¡¨æ ¼æµ‹è¯•

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | æ¨èæŒ‡æ•° |
|------|------|------|----------|
| marked | æµè¡Œç¨³å®š | éœ€é…ç½® | â­â­â­â­ |
| vue3-markdown-it | å¼€ç®±å³ç”¨ | ç¤¾åŒºå° | â­â­â­â­â­ |
| marked + DOMPurify | æœ€å®‰å…¨ | å¤æ‚ | â­â­â­â­â­ |

## ğŸ’» å¤æ‚ä»£ç ç¤ºä¾‹

\`\`\`typescript
interface User {
  id: number;
  name: string;
  email: string;
}

async function fetchUsers(): Promise<User[]> {
  const response = await fetch('/api/users');
  const data = await response.json();
  return data.map((user: any) => ({
    id: user.id,
    name: user.name,
    email: user.email
  }));
}

// ä½¿ç”¨ç¤ºä¾‹
fetchUsers().then(users => {
  console.log('ç”¨æˆ·åˆ—è¡¨:', users);
});
\`\`\`

## ğŸ“š åµŒå¥—å¼•ç”¨

> ä¸€çº§å¼•ç”¨
>> äºŒçº§å¼•ç”¨
>>> ä¸‰çº§å¼•ç”¨

## âœ¨ æ··åˆå†…å®¹

è¿™æ˜¯ä¸€æ®µåŒ…å« **ç²—ä½“**ã€*æ–œä½“* å’Œ \`ä»£ç \` çš„æ··åˆæ–‡æœ¬ã€‚

[ç‚¹å‡»è®¿é—®å¤–éƒ¨é“¾æ¥](https://example.com)

---

**æµ‹è¯•å®Œæˆï¼** ğŸŠ
`;
};
</script>

<style lang="scss" scoped>
.markdown-compare-container {
  padding: 20px;
  max-width: 1600px;
  margin: 0 auto;
  
  h1 {
    text-align: center;
    font-size: 2em;
    margin-bottom: 30px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  
  // è¾“å…¥åŒºåŸŸ
  .input-section {
    margin-bottom: 30px;
    padding: 20px;
    background: white;
    border-radius: 12px;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
    
    h2 {
      margin-bottom: 16px;
      font-size: 1.5em;
    }
    
    .preset-buttons {
      margin-top: 12px;
      display: flex;
      gap: 12px;
    }
  }
  
  // å¯¹æ¯”å±•ç¤ºåŒºåŸŸ
  .compare-section {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
    gap: 20px;
    
    .renderer-card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
      overflow: hidden;
      
      .card-header {
        padding: 16px 20px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        display: flex;
        justify-content: space-between;
        align-items: center;
        
        h3 {
          margin: 0;
          font-size: 1.1em;
        }
      }
      
      .card-desc {
        padding: 12px 20px;
        background: #f9fafb;
        border-bottom: 1px solid #e1e4e8;
        
        p {
          margin: 4px 0;
          font-size: 13px;
          color: #6a737d;
        }
      }
      
      .card-body {
        padding: 20px;
        max-height: 600px;
        overflow-y: auto;
        
        // è‡ªå®šä¹‰æ»šåŠ¨æ¡
        &::-webkit-scrollbar {
          width: 6px;
        }
        
        &::-webkit-scrollbar-thumb {
          background: #dcdfe6;
          border-radius: 3px;
          
          &:hover {
            background: #c0c4cc;
          }
        }
      }
    }
  }
}
</style>
